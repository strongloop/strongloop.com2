---
layout: post
title: LoopBack 4 November 2020 Milestone Update
date: 2020-12-08
author: Janny Hou
permalink: /strongblog/november-2020-milestone/
categories:
  - Community
  - LoopBack
published: true
---

Hope you had a wonderful Thanksgiving for those who celebrate it! In November, LoopBack team focused on improving the context module and documentation, as well as bug fixes. The Toronto squad participated in the [CASCONxEVOKE](https://www-01.ibm.com/ibm/cas/cascon/) conference. Instead of a physical booth, we held a virtual one online. We welcomed [@nflaig](https://github.com/nflaig) as the new maintainer of [`loopback-next`](https://github.com/strongloop/loopback-next).

Read more to know about the highlighted improvements:

<!--more-->

## Context

- A new phase `init()` was added to the application life cycle events. It is used when a component need to contribute bindings asynchronously. For example:

  ```ts
  export class MyComponent implements Component, LifeCycleObserver {
    // ...
    async init() {
      // Contribute bindings via `init`
      // This cannot be done via constructor since it's synchronous.
      const val = await readFromConfig();
      this.app.bind('abc').to(val);
      this.status = 'initialized';
      this.initialized = true;
    }
  }
  ```
  You can check the [Component](https://loopback.io/doc/en/lb4/Component.html#component-life-cycle) page to learn about its usage.

- `toInjectable()` was introduced as a shortcut to decorate a common/provider/dynamic-value-factory class and automatically creating binding for them. For example:
  ```ts
  @injectable({scope: BindingScope.SINGLETON})
  class MyController {
    constructor(@inject('my-options') private options: MyOptions) {
      // ...
    }
  }

  binding.toInjectable(MyController);
  ```
  The decorator's usage is well documented on page [Binding](https://loopback.io/doc/en/lb4/Binding.html#an-injectable-class).

- PR [#6701](https://github.com/strongloop/loopback-next/pull/6701) updated test cases to reflect how the design types of array/undefined/complex properties are retrieved.

- Method injection is allowed for the lifecycle methods in PR [#6740](https://github.com/strongloop/loopback-next/pull/6740). For example:

  ```ts
  class MyObserverWithMethodInjection implements LifeCycleObserver {
    status = 'not-initialized';
    init(@inject('prefix') prefix: string) {
      this.status = `${prefix}:initialized`;
    }
    start(@inject('prefix') prefix: string) {
      this.status = `${prefix}:started`;
    }
    stop(@inject('prefix') prefix: string) {
      this.status = `${prefix}:stopped`;
    }
  }
  ```

- In some cases, your Express middleware wants to access LoopBack's RequestContext to resolve certain bindings. This can be done via `MIDDLEWARE_CONTEXT` property of the Express request object, which is set up by LoopBack when the `RequestContext` is instantiated. For example:

  ```ts
  import {MIDDLEWARE_CONTEXT, RequestContext} from '@loopback/rest';
  function expressHandler(req, res, next) {
    const reqCtx = (req as any)[MIDDLEWARE_CONTEXT];
    // Now you have access to the LoopBack RequestContext
  }
  ```

## Documentation

- The guide for calling REST APIs and SOAP services were separated to make the steps involved clearer. You can check the overview page [Accessing services](https://loopback.io/doc/en/lb4/Accessing-services.html) and its sub-topics [Calling SOAP web services](https://loopback.io/doc/en/lb4/Calling-soap-web-services.html) and [Calling REST APIs](https://loopback.io/doc/en/lb4/Calling-rest-apis.html) for details.

- For troubleshooting, we added steps for creating breakpoints in vscode in the [documentation](https://loopback.io/doc/en/lb4/Troubleshooting.html#creating-breakpoints). You can find more details in PR [#6743](https://github.com/strongloop/loopback-next/pull/6743). 

## REST

- Matching a URL or hostname against a regular expression that contains an unescaped dot as part of the hostname might match more hostnames than expected. PR [#6813](https://github.com/strongloop/loopback-next/pull/6813) updated the regular expression of hostnames accordingly.

## Repository

- [#6755](https://github.com/strongloop/loopback-next/pull/6755) threw 400 `BadRequestError` for invalid inclusion relation name by rejecting the request with statusCode as 400.

## Examples

- PR [#6598](https://github.com/strongloop/loopback-next/pull/6598) updated artifacts of the [todo-list](https://github.com/strongloop/loopback-next/tree/master/examples/todo-list) example to the latest style generated by the LoopBack CLI.

## Enriching LoopBack and its Community - You are Invited!

As mentioned in our [recent blog post](https://strongloop.com/strongblog/2020-community-contribution/), your contribution is important to make LoopBack a sustainable open source project. 

Here is what you can do:
- [Join LoopBack Slack community](https://join.slack.com/t/loopbackio/shared_invite/zt-8lbow73r-SKAKz61Vdao~_rGf91pcsw)
- [Look for first-contribution-friendly issues](https://github.com/strongloop/loopback-next/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22)
- Give us feedback and join our discussion in [our GitHub repo](https://github.com/strongloop/loopback-next)

Let's make LoopBack a better framework together!
